var appKeys={debug:{appId:"gLFbkh8oDB900BUnL8VNoxscpIoKCcfVCvS3iDff",javascriptKey:"T4DNE3ptpMqt5xzZwYwXynqMxBfr8jSn2qciPQRZ"}},env="debug";Parse.initialize(appKeys[env].appId,appKeys[env].javascriptKey),angular.module("Varsom",["ionic","ionic.service.core","ionic.service.analytics"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(t,o,e){ionic.Platform.isAndroid()&&e.scrolling.jsScrolling(!1),o.otherwise("/"),t.state("home",{url:"/",templateUrl:"home/home.html",controller:"HomeCtrl as HomeModel"}).state("county",{url:"/county",params:{county:null},templateUrl:"county/county.html",controller:"CountyCtrl as CountyModel"})}]).run(["$ionicPlatform","$ionicAnalytics",function(t,o){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]),function(){"use strict";function t(t){var o=this;o.county=t.county,console.log(o.county)}angular.module("Varsom").controller("CountyCtrl",t),t.$inject=["$stateParams"]}(),function(){"use strict";function t(t,o,e,n){function a(a,i,r){i.css("height","480px");var c=L.map(i[0],{center:[64.871,16.949],zoom:4}),l=L.tileLayer("http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}@2x.png"),s={0:{weight:3,color:"#C8C8C8",dashArray:"",fillOpacity:.7},1:{weight:3,color:"#75B100",dashArray:"",fillOpacity:.7},2:{weight:3,color:"#FFCC33",dashArray:"",fillOpacity:.7},3:{weight:3,color:"#E46900",dashArray:"",fillOpacity:.7},4:{weight:3,color:"#D21523",dashArray:"",fillOpacity:.7},5:{weight:3,color:"#3E060B",dashArray:"",fillOpacity:.7},clicked:{weight:3,color:"#666",dashArray:"",fillOpacity:.7}};c.addLayer(l),c.dragging.disable(),c.touchZoom.disable(),c.doubleClickZoom.disable(),c.scrollWheelZoom.disable(),c.tap&&c.tap.disable(),t.countiesLoaded.then(function(t){t.forEach(function(t){o.get(t.geojson,{cache:!0}).success(function(o){L.geoJson(o,{onEachFeature:function(o,a){a.setStyle(s[t.forecasts.maxLevel]),a.on("click",function(o){e.go("county",{countyName:t.name}),a.setStyle(s.clicked),n(function(){a.setStyle(s[t.forecasts.maxLevel])},500)})}}).addTo(c)})})})}return{restrict:"A",link:a}}angular.module("Varsom").directive("leafletMap",t),t.$inject=["County","$http","$state","$timeout"]}(),function(){"use strict";function t(t){var o=this;t.countiesLoaded.then(function(t){console.log(t),o.counties=t})}angular.module("Varsom").controller("HomeCtrl",t),t.$inject=["County"]}(),function(){"use strict";function t(t){var o={},e=Parse.Object.extend("County"),n=new Parse.Query(e);n.include("FloodWarningForecast"),n.include("LandSlideWarningForecast");var a=t.defer();return o.countiesLoaded=a.promise,n.find({success:function(t){for(var o=[],e=0;e<t.length;e++){for(var n={name:t[e].get("name"),geojson:t[e].get("geoJSONmin").url(),forecasts:{flood:t[e].get("FloodWarningForecast"),landslide:t[e].get("LandSlideWarningForecast")}},i=-1,r=n.forecasts.flood.length;r--;)n.forecasts.flood[r].attributes.activityLevel>i&&(i=n.forecasts.flood[r].attributes.activityLevel),n.forecasts.landslide[r].attributes.activityLevel>i&&(i=n.forecasts.landslide[r].attributes.activityLevel);n.forecasts.maxLevel=i,o.push(n)}a.resolve(o)},error:function(t){a.reject(),alert("Error: "+t.code+" "+t.message)}}),o}angular.module("Varsom").factory("County",t),t.$inject=["$q"]}(),function(){"use strict";function t(t){return{set:function(o,e){t.localStorage[o]=e},get:function(o,e){return t.localStorage[o]||e},setObject:function(o,e){t.localStorage[o]=JSON.stringify(e)},getObject:function(o){return JSON.parse(t.localStorage[o]||"{}")}}}angular.module("Varsom").factory("LocalStorage",t),t.$inject=["$window"]}(),angular.module("Varsom").run(["$templateCache",function(t){t.put("county/county.html",'<ion-view title="{{CountyModel.county.name}}"><ion-content>{{CountyModel.county.name}}</ion-content></ion-view>'),t.put("home/home.html",'<ion-view title="Varsom"><ion-content><div leaflet-map=""></div><ion-list><ion-item ng-repeat="county in ::HomeModel.counties" ui-sref="county({county:county})">{{::county.name}}</ion-item></ion-list></ion-content></ion-view>')}]);